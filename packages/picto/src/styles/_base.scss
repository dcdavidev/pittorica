@use 'sass:map';
@use './utils/reset-margins';
@use './utils/border-box';
@use './variables/text-tokens';
@use './variables/font-weight';
@use './variables/line-height';
@use './variables/letter-spacing';
@use './variables/colors';

// Generate text color utility classes
@mixin text-colors {
  @each $name in colors.$color-token-names {
    &.picto-text-#{$name} {
      color: var(--picto-text-#{$name});
    }
  }
}

// Apply typographic tokens
@mixin apply-text-style($name) {
  font-size: var(--picto-text-#{$name});
  line-height: var(--picto-text-#{$name}-line-height);
  font-weight: var(--picto-text-#{$name}-weight);
  letter-spacing: var(--picto-text-#{$name}-tracking);
}

// Alignment utilities
@mixin text-align($align) {
  .picto-text-#{$align} {
    text-align: $align;
  }
}

html {
  font-size: 16px;
}

html,
body,
*,
*::before,
*::after {
  @extend %border-box;
}

html,
body {
  @extend %reset-margins;
}

body {
  font-family: var(--picto-font-sans);
  background-color: var(--picto-color-white);
  color: var(--picto-color-black);

  .picto-theme-dark {
    background-color: var(--picto-color-black);
    color: var(--picto-color-white);
  }

  .picto-theme-light {
    background-color: var(--picto-color-white);
    color: var(--picto-color-black);
  }
}

// Bind text color utilities to all text elements
h1,
h2,
h3,
h4,
h5,
h6,
p,
.picto-text-display-lg,
.picto-text-display-md,
.picto-text-display-sm,
.picto-text-headline-lg,
.picto-text-headline-md,
.picto-text-headline-sm,
.picto-text-title-lg,
.picto-text-title-md,
.picto-text-title-sm,
.picto-text-body-lg,
.picto-text-body-md,
.picto-text-body-sm {
  display: block;
  @include text-colors;
}

// Map headings to tokens
$heading-map: (
  h1: 'display-lg',
  h2: 'display-md',
  h3: 'display-sm',
  h4: 'headline-lg',
  h5: 'headline-md',
  h6: 'headline-sm',
);

// Generate text-style classes from tokens
@each $name, $token in text-tokens.$text-styles {
  .picto-text-#{$name} {
    @include apply-text-style($name);
  }
}

// Bind heading tags to their typographic maps
@each $tag, $style in $heading-map {
  #{$tag} {
    @extend .picto-text-#{$style};
  }
}

// Default paragraph style
p {
  @extend .picto-text-body-md;
}

// Font assignments
h1,
h2,
h3,
h4,
h5,
h6,
.picto-text-display-lg,
.picto-text-display-md,
.picto-text-display-sm,
.picto-text-headline-lg,
.picto-text-headline-md,
.picto-text-headline-sm,
.picto-text-title-lg,
.picto-text-title-md,
.picto-text-title-sm {
  font-family: var(--picto-font-display);
}

p,
.picto-text-label-lg,
.picto-text-label-md,
.picto-text-label-sm,
.picto-text-body-lg,
.picto-text-body-md,
.picto-text-body-sm {
  font-family: var(--picto-font-sans);
}

b,
strong {
  font-weight: var(--picto-font-weight-bold);
  @include text-colors;
}

.picto-font-weight-regular {
  font-weight: font-weight.$font-weight-regular !important;
}
.picto-font-weight-medium {
  font-weight: font-weight.$font-weight-medium !important;
}
.picto-font-weight-semibold {
  font-weight: font-weight.$font-weight-semibold !important;
}
.picto-font-weight-bold {
  font-weight: font-weight.$font-weight-bold !important;
}

.picto-line-height-tight {
  line-height: line-height.$line-height-tight !important;
}
.picto-line-height-normal {
  line-height: line-height.$line-height-normal !important;
}
.picto-line-height-relaxed {
  line-height: line-height.$line-height-relaxed !important;
}

.picto-tracking-tight {
  letter-spacing: letter-spacing.$letter-spacing-tight !important;
}
.picto-tracking-normal {
  letter-spacing: letter-spacing.$letter-spacing-normal !important;
}
.picto-tracking-wide {
  letter-spacing: letter-spacing.$letter-spacing-wide !important;
}
.picto-tracking-wider {
  letter-spacing: letter-spacing.$letter-spacing-wider !important;
}

.picto-tracking-tight {
  letter-spacing: letter-spacing.$letter-spacing-tight !important;
}
.picto-tracking-normal {
  letter-spacing: letter-spacing.$letter-spacing-normal !important;
}
.picto-tracking-wide {
  letter-spacing: letter-spacing.$letter-spacing-wide !important;
}
.picto-tracking-wider {
  letter-spacing: letter-spacing.$letter-spacing-wider !important;
}

.picto-text-primary {
  color: map.get(colors.$base, primary) !important;
}
.picto-text-secondary {
  color: map.get(colors.$base, secondary) !important;
}
.picto-text-tertiary {
  color: map.get(colors.$base, tertiary) !important;
}
.picto-text-error {
  color: map.get(colors.$base, error) !important;
}
.picto-text-success {
  color: map.get(colors.$base, success) !important;
}
.picto-text-info {
  color: map.get(colors.$base, info) !important;
}
.picto-text-warning {
  color: map.get(colors.$base, warning) !important;
}
.picto-text-black {
  color: colors.$black !important;
}
.picto-text-white {
  color: colors.$white !important;
}

// Alignment utilities
@include text-align(right);
@include text-align(center);
@include text-align(left);
@include text-align(justify);

i,
em,
.picto-text-italic {
  font-style: italic;
}

hr,
.picto-divider {
  @extend %border-box;
  border: none;
  border-top: 1px solid var(--picto-outline);
}

.picto-divider-dark {
  border-top-color: var(--picto-color-black);
}

.picto-divider-light {
  border-top-color: var(--picto-color-white);
}

.picto-divider-primary {
  border-top-color: var(--picto-primary);
}

.picto-divider-secondary {
  border-top-color: var(--picto-secondary);
}

.picto-divider-tertiary {
  border-top-color: var(--picto-tertiary);
}

.picto-divider-error {
  border-top-color: var(--picto-error);
}

.picto-divider-neutral {
  border-top-color: var(--picto-neutral);
}

.picto-divider-info {
  border-top-color: var(--picto-info);
}

.picto-divider-warning {
  border-top-color: var(--picto-warning);
}

.picto-divider-danger {
  border-top-color: var(--picto-danger);
}
